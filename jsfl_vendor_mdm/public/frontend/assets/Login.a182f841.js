var b=(s,o,c)=>new Promise((x,t)=>{var u=h=>{try{v(c.next(h))}catch(g){t(g)}},l=h=>{try{v(c.throw(h))}catch(g){t(g)}},v=h=>h.done?x(h.value):Promise.resolve(h.value).then(u,l);v((c=c.apply(s,o)).next())});import{s as E}from"./index.bc6aedb2.js";import{_ as w,c as p,o as n,f as r,l as e,x as m,y as _,m as a,D as d,E as y,G as f,z as k,p as S,q as U}from"./vendor.2391a1cf.js";var j="/assets/jsfl_vendor_mdm/frontend/assets/Jio_Financial_Services_Logo.4a13446e.png";const V={name:"Login",data(){return{show:!1,email:"",password:"",options:!1,otpsent:!1,varified:!1,title:"",first_name:"",mobile_no:"",last_name:"",otp:"",userExists:!1,email_otp_send:"",enter_otp:!1}},methods:{submit(){E.login.submit({email:this.email,password:this.password})},signUp(){return b(this,null,function*(){try{const s=yield p({url:"frappe.core.doctype.user.user.sign_up",params:{email:this.email,full_name:this.first_name+" "+this.last_name,mobile_no:this.mobile_no,first_name:this.first_name,last_name:this.last_name,redirect_to:""},auto:!0});s.status===200?(console.log("User signed up successfully"),console.log(s.data)):console.error("Failed to sign up:",s.statusText)}catch(s){console.log(s)}})},sendOTP(){return b(this,null,function*(){try{this.options=!this.options;const s=yield p({url:"jsfl_vendor_mdm.jsfl_vendor_mdm.custom.api.new",makeParams:()=>({doc:{email:this.email}}),auto:!0,onSuccess:o=>{this.otpsent=!0,this.recievedOtp=o.email_otp,console.log(this.recievedOtp)},onError:o=>{console.error("Error:",o)}})}catch(s){console.error("Exception:",s)}})},sendOTPLogin(){return b(this,null,function*(){try{this.options=!this.options;const s=yield p({url:"jsfl_vendor_mdm.jsfl_vendor_mdm.custom.api.request_verification_code",makeParams:()=>({email:this.email}),auto:!0,onSuccess:o=>{this.otpsent=!0,this.recievedOtp=o.email_otp,console.log(this.recievedOtp)},onError:o=>{console.error("Error:",o)}})}catch(s){console.error("Exception:",s)}})},login(){return b(this,null,function*(){try{this.options=!this.options;const s=yield p({url:"jsfl_vendor_mdm.jsfl_vendor_mdm.custom.api.verify_code_and_login",makeParams:()=>({email:this.email,verification_code:this.otp}),auto:!0,onSuccess:o=>{this.otpsent=!0,this.recievedOtp=o.email_otp,console.log(o)},onError:o=>{console.error("Error:",o)}})}catch(s){console.error("Exception:",s)}})},updated(){this.emailotp&&(this.recievedOtp==this.emailotp?(this.otpsent=!1,this.varified=!0,console.log("Verified")):console.log("invalid "))},logintoportal(){this.emailotp&&(this.recievedOtp==this.emailotp?(this.otpsent=!1,this.loginwithoutpass(),console.log("Verified")):console.log("invalid "))},newUser(){try{const s=p({url:"jsfl_vendor_mdm.jsfl_vendor_mdm.custom.api.new_user",makeParams:()=>({doc:{email:this.email,first_name:this.first_name,last_name:this.last_name,mobile_no:this.mobile_no}}),auto:!0,onSuccess:o=>{console.log(o)},onError:o=>{console.error("this is Error:",o)}})}catch(s){console.log(s)}},loginwithoutpass(){p({url:"jsfl_vendor_mdm.jsfl_vendor_mdm.custom.api.login",makeParams:()=>({doc:{email:this.email}}),auto:!0,onSuccess:s=>{if(s){let o=window.location.origin;const c=o+"/frontend/?sid="+s;console.log(c),window.location.replace(o+"/frontend/welcome"),window.location.replace(c),setTimeout(()=>{window.location.replace(o+"/frontend/welcome")},1e3)}},onError:s=>{console.error("this is Error:",s)}})},sendOTPforLogintoEmail(){p({url:"jsfl_vendor_mdm.jsfl_vendor_mdm.custom.api.check",makeParams:()=>({doc:{email:this.email}}),auto:!0,onSuccess:s=>{console.log(s),this.enter_otp=!0,this.recievedOtp=s.email_otp},onError:s=>{console.error("Error:",s),alert(`An error occurred: ${s.message}`)}})},checkUserExists(){p({url:"jsfl_vendor_mdm.jsfl_vendor_mdm.custom.api.checkUserExists",makeParams:()=>({doc:{email:this.email}}),auto:!0,onSuccess:s=>{s?(console.log(s),this.userExists=!0,this.mobile_no=s.mobile_no):alert("User Not Registered")},onError:s=>{console.error("Error:",s),alert(`An error occurred: ${s.message}`)}})},send(){console.log(this.email_otp_send),this.email_otp_send=="otpSendtoEmail"&&this.sendOTPforLogintoEmail()}}},i=s=>(S("data-v-d60d7e3a"),s=s(),U(),s),O={class:"background-radial-gradient overflow-hidden"},q={class:"container px-4 py-5 px-md-5 text-center text-lg-start my-5"},P={class:"row gx-lg-5 align-items-center mb-5"},I=i(()=>e("div",{class:"col-lg-6 mb-5 mb-lg-0",style:{"z-index":"10"}},[e("div",{class:"bg-image"},[e("img",{src:j,alt:"Jio Image"})]),e("h1",{class:"my-5 display-5 fw-bold ls-tight",style:{color:"hsl(218, 81%,50%)"}}," Welcome to, JFSL Portal ")],-1)),C={class:"col-lg-5 mb-5 mb-lg-0 position-relative"},N=i(()=>e("div",{id:"radius-shape-1",class:"position-absolute rounded-circle shadow-5-strong"},null,-1)),L=i(()=>e("div",{id:"radius-shape-2",class:"position-absolute shadow-5-strong"},null,-1)),M={class:"card bg-glass"},T={key:0,class:"card-body px-4 py-5 px-md-5"},D=i(()=>e("h1",{style:{color:"blue","text-align":"center"}},"Welcome",-1)),A=i(()=>e("p",{style:{"text-align":"center",color:"rgb(108, 108, 252)"}},"Login with your Supplier ID",-1)),B={class:"form-outline mb-4"},F=["disabled"],R={class:"text-center"},W={key:1,class:"card-body px-4 py-5 px-md-5"},z=i(()=>e("h1",{style:{color:"blue","text-align":"center"}},"Welcome",-1)),J=i(()=>e("p",{style:{"text-align":"center",color:"rgb(108, 108, 252)"}},"Select Agent and OTP delivery method.",-1)),Y={class:"form-outline mb-4"},K=i(()=>e("br",null,null,-1)),G=i(()=>e("br",null,null,-1)),H=i(()=>e("br",null,null,-1)),Q=["disabled"],X={class:"text-center"},Z={key:2,class:"card-body px-4 py-5 px-md-5"},$=i(()=>e("h1",{style:{color:"blue","text-align":"center"}},"Welcome",-1)),ee={key:0,class:"form-outline mb-4"},oe={key:3,class:"card-body px-4 py-5 px-md-5"},te=i(()=>e("h1",{style:{color:"blue","text-align":"center"}},"Sign Up",-1)),se=i(()=>e("p",{style:{"text-align":"center",color:"rgb(108, 108, 252)"}},"Kindly enter your Email ID to proceed",-1)),le={key:0,class:"form-outline mb-4"},ie=["disabled"],ne={key:0,style:{color:"green","font-size":"small"}},re={key:2,class:"form-outline mb-4"},me={class:"text-center"},de={key:4,class:"card-body px-4 py-5 px-md-5"},ae=i(()=>e("h1",{style:{color:"blue","text-align":"center"}},"Success",-1)),ce=i(()=>e("p",{style:{"text-align":"center",color:"rgb(108, 108, 252)"}},[a("Your Email has been verified!"),e("br"),a(" Kindly register here.")],-1)),ue={class:"form-outline mb-4"},pe={class:"form-outline mb-4"},_e=i(()=>e("option",{value:"",selected:""},"Select title",-1)),he=i(()=>e("option",{value:"m/s"},"Mr.",-1)),be=i(()=>e("option",{value:"master"},"Mister",-1)),fe=i(()=>e("option",{value:"miss"},"Miss",-1)),ve=[_e,he,be,fe],ge={class:"form-outline mb-4"},ye={class:"form-outline mb-4"},xe={class:"form-outline mb-4"},Ee={class:"text-center"},we=i(()=>e("div",null,null,-1));function ke(s,o,c,x,t,u){return n(),r("section",O,[e("div",q,[e("div",P,[I,e("div",C,[N,L,e("div",M,[!t.show&&!t.userExists?(n(),r("div",T,[D,A,e("div",B,[m(e("input",{required:"",type:"text",name:"email",id:"form3Example1",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=l=>t.email=l),placeholder:"Supplier ID"},null,512),[[_,t.email]])]),e("button",{class:"btn btn-primary btn-block mb-4",onClick:o[1]||(o[1]=l=>u.checkUserExists()),disabled:!t.email}," Login ",8,F),e("div",R,[e("p",null,[a("Not registered with us? "),e("a",{style:{color:"blue"},onClick:o[2]||(o[2]=l=>t.show=!t.show)},"Sign up")])])])):d("",!0),t.userExists&&!t.enter_otp?(n(),r("div",W,[z,J,e("div",Y,[e("label",null,[m(e("input",{required:"",type:"radio",name:"email",class:"","onUpdate:modelValue":o[3]||(o[3]=l=>t.email_otp_send=l),value:"otpSendtoEmail"},null,512),[[y,t.email_otp_send]]),a(" \xA0 Email: "+f(t.email),1)]),K,e("label",null,[m(e("input",{required:"",type:"radio",name:"email",class:"","onUpdate:modelValue":o[4]||(o[4]=l=>t.email_otp_send=l),value:"otpSendtoMobile"},null,512),[[y,t.email_otp_send]]),a(" \xA0 Mobile: "+f(t.mobile_no),1)]),G,e("label",null,[m(e("input",{required:"",type:"radio",name:"email",class:"","onUpdate:modelValue":o[5]||(o[5]=l=>t.email_otp_send=l),value:"otpSendtoBoth"},null,512),[[y,t.email_otp_send]]),a(" \xA0 Both: Email "+f(s.eamil)+" & Mobile "+f(t.mobile_no),1)]),H]),e("button",{class:"btn btn-primary btn-block mb-4",onClick:o[6]||(o[6]=l=>u.send()),disabled:!t.email_otp_send}," Continue ",8,Q),e("div",X,[e("p",null,[a("Not registered with us? "),e("a",{style:{color:"blue"},onClick:o[7]||(o[7]=()=>{t.show=!t.show,t.userExists=!t.userExists})},"Sign up")])])])):d("",!0),t.enter_otp?(n(),r("div",Z,[$,t.enter_otp?(n(),r("div",ee,[m(e("input",{required:"",type:"text",name:"emailotp",id:"emailotp",class:"form-control","onUpdate:modelValue":o[8]||(o[8]=l=>s.emailotp=l),placeholder:"Enter otp"},null,512),[[_,s.emailotp]])])):d("",!0),t.enter_otp?(n(),r("button",{key:1,class:"btn btn-primary btn-block mb-4",onClick:o[9]||(o[9]=l=>u.logintoportal())}," Next ")):d("",!0)])):d("",!0),t.show&&!t.varified?(n(),r("div",oe,[te,se,e("form",null,[t.options?d("",!0):(n(),r("div",le,[m(e("input",{required:"",type:"text",name:"email",id:"form3Example2",class:"form-control","onUpdate:modelValue":o[10]||(o[10]=l=>t.email=l),placeholder:"Enter Your Email ID"},null,512),[[_,t.email]])])),t.options?d("",!0):(n(),r("button",{key:1,class:"btn btn-primary btn-block mb-4",onClick:o[11]||(o[11]=l=>u.sendOTP()),disabled:!t.email}," Next ",8,ie)),e("div",null,[t.otpsent?(n(),r("p",ne,"Otp Set to your Email Id")):d("",!0)]),t.options?(n(),r("div",re,[m(e("input",{required:"",type:"text",name:"emailotp",id:"emailotp",class:"form-control","onUpdate:modelValue":o[12]||(o[12]=l=>s.emailotp=l),placeholder:"Enter otp"},null,512),[[_,s.emailotp]])])):d("",!0),t.options?(n(),r("button",{key:3,class:"btn btn-primary btn-block mb-4",onClick:o[13]||(o[13]=l=>u.updated())}," Next ")):d("",!0),e("div",me,[e("p",null,[a("Already registered with us? "),e("a",{style:{color:"blue"},onClick:o[14]||(o[14]=l=>t.show=!t.show)},"Sign In instead")])])])])):d("",!0),t.varified?(n(),r("div",de,[ae,ce,e("form",null,[e("div",ue,[m(e("input",{required:"",type:"text",name:"email",id:"form3Example3",class:"form-control","onUpdate:modelValue":o[15]||(o[15]=l=>t.email=l),readonly:"",placeholder:"Enter Your Email ID",style:{"background-color":"#eeeeeeb2"}},null,512),[[_,t.email]])]),e("div",pe,[m(e("select",{required:"",name:"title",id:"form3Example4",class:"form-control","onUpdate:modelValue":o[16]||(o[16]=l=>t.title=l),placeholder:"select title"},ve,512),[[k,t.title]])]),e("div",ge,[m(e("input",{required:"",type:"text",name:"first_name",id:"form3Example5",class:"form-control","onUpdate:modelValue":o[17]||(o[17]=l=>t.first_name=l),placeholder:"First Name"},null,512),[[_,t.first_name]])]),e("div",ye,[m(e("input",{required:"",type:"text",name:"last_name",id:"form3Example6",class:"form-control","onUpdate:modelValue":o[18]||(o[18]=l=>t.last_name=l),placeholder:"Last Name"},null,512),[[_,t.last_name]])]),e("div",xe,[m(e("input",{required:"",type:"text",name:"mobile_no",id:"form3Example6",class:"form-control","onUpdate:modelValue":o[19]||(o[19]=l=>t.mobile_no=l),placeholder:"Mobile Number"},null,512),[[_,t.mobile_no]])]),e("button",{class:"btn btn-primary btn-block mb-4",onClick:o[20]||(o[20]=l=>u.newUser())}," Register "),e("div",Ee,[e("p",null,[a("Already registered with us? "),e("a",{style:{color:"blue"},onClick:o[21]||(o[21]=l=>t.show=!t.show)},"Sign In instead")])])])])):d("",!0)])])])]),we])}var Ve=w(V,[["render",ke],["__scopeId","data-v-d60d7e3a"]]);export{Ve as default};
