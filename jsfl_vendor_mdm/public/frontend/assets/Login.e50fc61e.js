var b=(s,e,c)=>new Promise((x,t)=>{var p=h=>{try{f(c.next(h))}catch(g){t(g)}},l=h=>{try{f(c.throw(h))}catch(g){t(g)}},f=h=>h.done?x(h.value):Promise.resolve(h.value).then(p,l);f((c=c.apply(s,e)).next())});import{s as E}from"./index.ac9a175e.js";import{_ as w,c as u,o as n,f as r,l as o,v as a,x as _,m,A as d,B as y,D as v,y as k,z as S,p as U,q as V}from"./vendor.66456c9a.js";var j="/assets/jsfl_vendor_mdm/frontend/assets/Jio_Financial_Services_Logo.4a13446e.png";const O={name:"Login",data(){return{show:!1,email:"",password:"",options:!1,otpsent:!1,varified:!1,title:"",first_name:"",mobile_no:"",last_name:"",otp:"",userExists:!1,email_otp_send:"",enter_otp:!1}},methods:{submit(){E.login.submit({email:this.email,password:this.password})},signUp(){return b(this,null,function*(){try{const s=yield u({url:"frappe.core.doctype.user.user.sign_up",params:{email:this.email,full_name:this.first_name+" "+this.last_name,mobile_no:this.mobile_no,first_name:this.first_name,last_name:this.last_name,redirect_to:""},auto:!0});s.status===200?(console.log("User signed up successfully"),console.log(s.data)):console.error("Failed to sign up:",s.statusText)}catch(s){console.log(s)}})},sendOTP(){return b(this,null,function*(){try{this.options=!this.options;const s=yield u({url:"jsfl_vendor_mdm.jsfl_vendor_mdm.custom.api.new",makeParams:()=>({doc:{email:this.email}}),auto:!0,onSuccess:e=>{this.otpsent=!0,this.recievedOtp=e.email_otp,console.log(this.recievedOtp)},onError:e=>{console.error("Error:",e)}})}catch(s){console.error("Exception:",s)}})},sendOTPLogin(){return b(this,null,function*(){try{this.options=!this.options;const s=yield u({url:"jsfl_vendor_mdm.jsfl_vendor_mdm.custom.api.request_verification_code",makeParams:()=>({email:this.email}),auto:!0,onSuccess:e=>{this.otpsent=!0,this.recievedOtp=e.email_otp,console.log(this.recievedOtp)},onError:e=>{console.error("Error:",e)}})}catch(s){console.error("Exception:",s)}})},login(){return b(this,null,function*(){try{this.options=!this.options;const s=yield u({url:"jsfl_vendor_mdm.jsfl_vendor_mdm.custom.api.verify_code_and_login",makeParams:()=>({email:this.email,verification_code:this.otp}),auto:!0,onSuccess:e=>{this.otpsent=!0,this.recievedOtp=e.email_otp,console.log(e)},onError:e=>{console.error("Error:",e)}})}catch(s){console.error("Exception:",s)}})},updated(){this.emailotp&&(this.recievedOtp==this.emailotp?(this.otpsent=!1,this.varified=!0,console.log("Verified")):console.log("invalid "))},logintoportal(){this.emailotp&&(this.recievedOtp==this.emailotp?(this.otpsent=!1,this.loginwithoutpass(),console.log("Verified")):console.log("invalid "))},newUser(){try{const s=u({url:"jsfl_vendor_mdm.jsfl_vendor_mdm.custom.api.new_user",makeParams:()=>({doc:{email:this.email,first_name:this.first_name,last_name:this.last_name,mobile_no:this.mobile_no}}),auto:!0,onSuccess:e=>{console.log(e)},onError:e=>{console.error("this is Error:",e)}})}catch(s){console.log(s)}},loginwithoutpass(){u({url:"jsfl_vendor_mdm.jsfl_vendor_mdm.custom.api.login",makeParams:()=>({doc:{email:this.email}}),auto:!0,onSuccess:s=>{if(s){let e=window.location.origin;const c=e+"/frontend/?sid="+s;console.log(c),window.location.replace(e+"/frontend/welcome"),window.location.replace(c),setTimeout(()=>{window.location.replace(e+"/frontend/welcome")},1e3)}},onError:s=>{console.error("this is Error:",s)}})},sendOTPforLogintoEmail(){u({url:"jsfl_vendor_mdm.jsfl_vendor_mdm.custom.api.check",makeParams:()=>({doc:{email:this.email}}),auto:!0,onSuccess:s=>{console.log(s),this.enter_otp=!0,this.recievedOtp=s.email_otp},onError:s=>{console.error("Error:",s),alert(`An error occurred: ${s.message}`)}})},checkUserExists(){u({url:"jsfl_vendor_mdm.jsfl_vendor_mdm.custom.api.checkUserExists",makeParams:()=>({doc:{email:this.email}}),auto:!0,onSuccess:s=>{s?(console.log(s),this.userExists=!0,this.mobile_no=s.mobile_no):alert("User Not Registered")},onError:s=>{console.error("Error:",s),alert(`An error occurred: ${s.message}`)}})},send(){console.log(this.email_otp_send),this.email_otp_send=="otpSendtoEmail"&&this.sendOTPforLogintoEmail()}}},i=s=>(U("data-v-060711cd"),s=s(),V(),s),q={class:"background-radial-gradient overflow-hidden"},P={class:"container px-4 py-5 px-md-5 text-center text-lg-start my-5"},I={class:"row gx-lg-5 align-items-center mb-5"},N=S('<div class="col-lg-6 mb-5 mb-lg-0" style="z-index:10;" data-v-060711cd><div class="bg-image" data-v-060711cd><img src="'+j+'" alt="Jio Image" data-v-060711cd></div><h1 class="my-5 display-5 fw-bold ls-tight" style="color:hsl(218, 81%,50%);" data-v-060711cd> Welcome , <br data-v-060711cd><span style="color:hsl(218, 81%, 60%);" data-v-060711cd>Reliance Supplier Portal</span></h1></div>',1),C={class:"col-lg-5 mb-5 mb-lg-0 position-relative"},L=i(()=>o("div",{id:"radius-shape-1",class:"position-absolute rounded-circle shadow-5-strong"},null,-1)),M=i(()=>o("div",{id:"radius-shape-2",class:"position-absolute shadow-5-strong"},null,-1)),T={class:"card bg-glass"},D={key:0,class:"card-body px-4 py-5 px-md-5"},A=i(()=>o("h1",{style:{color:"blue","text-align":"center"}},"Welcome",-1)),B=i(()=>o("p",{style:{"text-align":"center",color:"rgb(108, 108, 252)"}},"Login with your Supplier ID",-1)),R={class:"form-outline mb-4"},W=["disabled"],z={class:"text-center"},F={key:1,class:"card-body px-4 py-5 px-md-5"},Y=i(()=>o("h1",{style:{color:"blue","text-align":"center"}},"Welcome",-1)),J=i(()=>o("p",{style:{"text-align":"center",color:"rgb(108, 108, 252)"}},"Select Agent and OTP delivery method.",-1)),K={class:"form-outline mb-4"},G=i(()=>o("br",null,null,-1)),H=i(()=>o("br",null,null,-1)),Q=i(()=>o("br",null,null,-1)),X=["disabled"],Z={class:"text-center"},$={key:2,class:"card-body px-4 py-5 px-md-5"},ee=i(()=>o("h1",{style:{color:"blue","text-align":"center"}},"Welcome",-1)),oe={key:0,class:"form-outline mb-4"},te={key:3,class:"card-body px-4 py-5 px-md-5"},se=i(()=>o("h1",{style:{color:"blue","text-align":"center"}},"Sign Up",-1)),le=i(()=>o("p",{style:{"text-align":"center",color:"rgb(108, 108, 252)"}},"Kindly enter your Email ID to proceed",-1)),ie={key:0,class:"form-outline mb-4"},ne=["disabled"],re={key:0,style:{color:"green","font-size":"small"}},ae={key:2,class:"form-outline mb-4"},de={class:"text-center"},me={key:4,class:"card-body px-4 py-5 px-md-5"},ce=i(()=>o("h1",{style:{color:"blue","text-align":"center"}},"Success",-1)),pe=i(()=>o("p",{style:{"text-align":"center",color:"rgb(108, 108, 252)"}},[m("Your Email has been verified!"),o("br"),m(" Kindly register here.")],-1)),ue={class:"form-outline mb-4"},_e={class:"form-outline mb-4"},he=i(()=>o("option",{value:"",selected:""},"Select title",-1)),be=i(()=>o("option",{value:"m/s"},"Mr.",-1)),ve=i(()=>o("option",{value:"master"},"Mister",-1)),fe=i(()=>o("option",{value:"miss"},"Miss",-1)),ge=[he,be,ve,fe],ye={class:"form-outline mb-4"},xe={class:"form-outline mb-4"},Ee={class:"form-outline mb-4"},we={class:"text-center"},ke=i(()=>o("div",null,null,-1));function Se(s,e,c,x,t,p){return n(),r("section",q,[o("div",P,[o("div",I,[N,o("div",C,[L,M,o("div",T,[!t.show&&!t.userExists?(n(),r("div",D,[A,B,o("div",R,[a(o("input",{required:"",type:"text",name:"email",id:"form3Example1",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=l=>t.email=l),placeholder:"Supplier ID"},null,512),[[_,t.email]])]),o("button",{class:"btn btn-primary btn-block mb-4",onClick:e[1]||(e[1]=l=>p.checkUserExists()),disabled:!t.email}," Login ",8,W),o("div",z,[o("p",null,[m("Not registered with us? "),o("a",{style:{color:"blue"},onClick:e[2]||(e[2]=l=>t.show=!t.show)},"Sign up")])])])):d("",!0),t.userExists&&!t.enter_otp?(n(),r("div",F,[Y,J,o("div",K,[o("label",null,[a(o("input",{required:"",type:"radio",name:"email",class:"","onUpdate:modelValue":e[3]||(e[3]=l=>t.email_otp_send=l),value:"otpSendtoEmail"},null,512),[[y,t.email_otp_send]]),m(" \xA0 Email: "+v(t.email),1)]),G,o("label",null,[a(o("input",{required:"",type:"radio",name:"email",class:"","onUpdate:modelValue":e[4]||(e[4]=l=>t.email_otp_send=l),value:"otpSendtoMobile"},null,512),[[y,t.email_otp_send]]),m(" \xA0 Mobile: "+v(t.mobile_no),1)]),H,o("label",null,[a(o("input",{required:"",type:"radio",name:"email",class:"","onUpdate:modelValue":e[5]||(e[5]=l=>t.email_otp_send=l),value:"otpSendtoBoth"},null,512),[[y,t.email_otp_send]]),m(" \xA0 Both: Email "+v(s.eamil)+" & Mobile "+v(t.mobile_no),1)]),Q]),o("button",{class:"btn btn-primary btn-block mb-4",onClick:e[6]||(e[6]=l=>p.send()),disabled:!t.email_otp_send}," Continue ",8,X),o("div",Z,[o("p",null,[m("Not registered with us? "),o("a",{style:{color:"blue"},onClick:e[7]||(e[7]=()=>{t.show=!t.show,t.userExists=!t.userExists})},"Sign up")])])])):d("",!0),t.enter_otp?(n(),r("div",$,[ee,t.enter_otp?(n(),r("div",oe,[a(o("input",{required:"",type:"text",name:"emailotp",id:"emailotp",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=l=>s.emailotp=l),placeholder:"Enter otp"},null,512),[[_,s.emailotp]])])):d("",!0),t.enter_otp?(n(),r("button",{key:1,class:"btn btn-primary btn-block mb-4",onClick:e[9]||(e[9]=l=>p.logintoportal())}," Next ")):d("",!0)])):d("",!0),t.show&&!t.varified?(n(),r("div",te,[se,le,o("form",null,[t.options?d("",!0):(n(),r("div",ie,[a(o("input",{required:"",type:"text",name:"email",id:"form3Example2",class:"form-control","onUpdate:modelValue":e[10]||(e[10]=l=>t.email=l),placeholder:"Enter Your Email ID"},null,512),[[_,t.email]])])),t.options?d("",!0):(n(),r("button",{key:1,class:"btn btn-primary btn-block mb-4",onClick:e[11]||(e[11]=l=>p.sendOTP()),disabled:!t.email}," Next ",8,ne)),o("div",null,[t.otpsent?(n(),r("p",re,"Otp Set to your Email Id")):d("",!0)]),t.options?(n(),r("div",ae,[a(o("input",{required:"",type:"text",name:"emailotp",id:"emailotp",class:"form-control","onUpdate:modelValue":e[12]||(e[12]=l=>s.emailotp=l),placeholder:"Enter otp"},null,512),[[_,s.emailotp]])])):d("",!0),t.options?(n(),r("button",{key:3,class:"btn btn-primary btn-block mb-4",onClick:e[13]||(e[13]=l=>p.updated())}," Next ")):d("",!0),o("div",de,[o("p",null,[m("Already registered with us? "),o("a",{style:{color:"blue"},onClick:e[14]||(e[14]=l=>t.show=!t.show)},"Sign In instead")])])])])):d("",!0),t.varified?(n(),r("div",me,[ce,pe,o("form",null,[o("div",ue,[a(o("input",{required:"",type:"text",name:"email",id:"form3Example3",class:"form-control","onUpdate:modelValue":e[15]||(e[15]=l=>t.email=l),readonly:"",placeholder:"Enter Your Email ID",style:{"background-color":"#eeeeeeb2"}},null,512),[[_,t.email]])]),o("div",_e,[a(o("select",{required:"",name:"title",id:"form3Example4",class:"form-control","onUpdate:modelValue":e[16]||(e[16]=l=>t.title=l),placeholder:"select title"},ge,512),[[k,t.title]])]),o("div",ye,[a(o("input",{required:"",type:"text",name:"first_name",id:"form3Example5",class:"form-control","onUpdate:modelValue":e[17]||(e[17]=l=>t.first_name=l),placeholder:"First Name"},null,512),[[_,t.first_name]])]),o("div",xe,[a(o("input",{required:"",type:"text",name:"last_name",id:"form3Example6",class:"form-control","onUpdate:modelValue":e[18]||(e[18]=l=>t.last_name=l),placeholder:"Last Name"},null,512),[[_,t.last_name]])]),o("div",Ee,[a(o("input",{required:"",type:"text",name:"mobile_no",id:"form3Example6",class:"form-control","onUpdate:modelValue":e[19]||(e[19]=l=>t.mobile_no=l),placeholder:"Mobile Number"},null,512),[[_,t.mobile_no]])]),o("button",{class:"btn btn-primary btn-block mb-4",onClick:e[20]||(e[20]=l=>p.newUser())}," Register "),o("div",we,[o("p",null,[m("Already registered with us? "),o("a",{style:{color:"blue"},onClick:e[21]||(e[21]=l=>t.show=!t.show)},"Sign In instead")])])])])):d("",!0)])])])]),ke])}var Oe=w(O,[["render",Se],["__scopeId","data-v-060711cd"]]);export{Oe as default};
